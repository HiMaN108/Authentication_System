{"ast":null,"code":"import React,{useState}from\"react\";import avatar from\"../assets/profile.png\";import toast,{Toaster}from\"react-hot-toast\";import{useFormik}from\"formik\";import{profileValidation}from\"../helper/validate\";import convertToBase64 from\"../helper/convert\";import useFetch from\"../hooks/fetch.hook\";import{updateUser}from\"../helper/helper\";// import { useAuthStore } from '../store/store.js'\nimport{useNavigate}from\"react-router-dom\";import styles from\"../styles/Username.module.css\";import extend from\"../styles/Profile.module.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){const[file,setFile]=useState();const[{isLoading,apiData,serverError}]=useFetch();const navigate=useNavigate();const formik=useFormik({initialValues:{firstName:(apiData===null||apiData===void 0?void 0:apiData.firstName)||\"\",lastName:(apiData===null||apiData===void 0?void 0:apiData.lastName)||\"\",email:(apiData===null||apiData===void 0?void 0:apiData.email)||\"\",mobile:(apiData===null||apiData===void 0?void 0:apiData.mobile)||\"\",address:(apiData===null||apiData===void 0?void 0:apiData.address)||\"\"},enableReinitialize:true,validate:profileValidation,validateOnBlur:false,validateOnChange:false,onSubmit:async values=>{values=await Object.assign(values,{profile:file||(apiData===null||apiData===void 0?void 0:apiData.profile)||\"\"});let updatePromise=updateUser(values);toast.promise(updatePromise,{loading:\"Updating...\",success:/*#__PURE__*/_jsx(\"b\",{children:\"Update Successfully...!\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"Could not Update!\"})});}});/** formik doensn't support file upload so we need to create this handler */const onUpload=async e=>{const base64=await convertToBase64(e.target.files[0]);setFile(base64);};// logout handler function\nfunction userLogout(){localStorage.removeItem(\"token\");navigate(\"/\");}if(isLoading)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"isLoading\"});if(serverError)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-red-500\",children:serverError.message});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:`${styles.glass} ${extend.glass}`,style:{width:\"45%\",paddingTop:\"3em\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-5xl font-bold\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"You can update the details.\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"py-1\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile flex justify-center py-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"profile\",children:/*#__PURE__*/_jsx(\"img\",{src:(apiData===null||apiData===void 0?void 0:apiData.profile)||file||avatar,className:`${styles.profile_img} ${extend.profile_img}`,alt:\"avatar\"})}),/*#__PURE__*/_jsx(\"input\",{onChange:onUpload,type:\"file\",id:\"profile\",name:\"profile\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name flex w-3/4 gap-10\",children:[/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps(\"firstName\"),className:`${styles.textbox} ${extend.textbox}`,type:\"text\",placeholder:\"FirstName\"}),/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps(\"lastName\"),className:`${styles.textbox} ${extend.textbox}`,type:\"text\",placeholder:\"LastName\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"name flex w-3/4 gap-10\",children:[/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps(\"mobile\"),className:`${styles.textbox} ${extend.textbox}`,type:\"text\",placeholder:\"Mobile No.\"}),/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps(\"email\"),className:`${styles.textbox} ${extend.textbox}`,type:\"text\",placeholder:\"Email*\"})]}),/*#__PURE__*/_jsx(\"input\",{...formik.getFieldProps(\"address\"),className:`${styles.textbox} ${extend.textbox}`,type:\"text\",placeholder:\"Address\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"Update\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"come back later?\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:userLogout,className:\"text-red-500\",to:\"/\",children:\"Logout\"})]})})]})})]});}","map":{"version":3,"names":["React","useState","avatar","toast","Toaster","useFormik","profileValidation","convertToBase64","useFetch","updateUser","useNavigate","styles","extend","jsx","_jsx","jsxs","_jsxs","Profile","file","setFile","isLoading","apiData","serverError","navigate","formik","initialValues","firstName","lastName","email","mobile","address","enableReinitialize","validate","validateOnBlur","validateOnChange","onSubmit","values","Object","assign","profile","updatePromise","promise","loading","success","children","error","onUpload","e","base64","target","files","userLogout","localStorage","removeItem","className","message","position","reverseOrder","glass","style","width","paddingTop","handleSubmit","htmlFor","src","profile_img","alt","onChange","type","id","name","getFieldProps","textbox","placeholder","btn","onClick","to"],"sources":["C:/Users/him20/Downloads/Authentication_System-main/Authentication_System-main/client/src/components/Profile.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport avatar from \"../assets/profile.png\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { useFormik } from \"formik\";\nimport { profileValidation } from \"../helper/validate\";\nimport convertToBase64 from \"../helper/convert\";\nimport useFetch from \"../hooks/fetch.hook\";\nimport { updateUser } from \"../helper/helper\";\n// import { useAuthStore } from '../store/store.js'\nimport { useNavigate } from \"react-router-dom\";\n\nimport styles from \"../styles/Username.module.css\";\nimport extend from \"../styles/Profile.module.css\";\n\nexport default function Profile() {\n  const [file, setFile] = useState();\n\n  const [{ isLoading, apiData, serverError }] = useFetch();\n  const navigate = useNavigate();\n\n  const formik = useFormik({\n    initialValues: {\n      firstName: apiData?.firstName || \"\",\n      lastName: apiData?.lastName || \"\",\n      email: apiData?.email || \"\",\n      mobile: apiData?.mobile || \"\",\n      address: apiData?.address || \"\",\n    },\n    enableReinitialize: true,\n    validate: profileValidation,\n    validateOnBlur: false,\n    validateOnChange: false,\n    onSubmit: async (values) => {\n      values = await Object.assign(values, {\n        profile: file || apiData?.profile || \"\",\n      });\n      let updatePromise = updateUser(values);\n\n      toast.promise(updatePromise, {\n        loading: \"Updating...\",\n        success: <b>Update Successfully...!</b>,\n        error: <b>Could not Update!</b>,\n      });\n    },\n  });\n\n  /** formik doensn't support file upload so we need to create this handler */\n  const onUpload = async (e) => {\n    const base64 = await convertToBase64(e.target.files[0]);\n    setFile(base64);\n  };\n\n  // logout handler function\n  function userLogout() {\n    localStorage.removeItem(\"token\");\n    navigate(\"/\");\n  }\n\n  if (isLoading) return <h1 className=\"text-2xl font-bold\">isLoading</h1>;\n  if (serverError)\n    return <h1 className=\"text-xl text-red-500\">{serverError.message}</h1>;\n\n  return (\n    <div className=\"container mx-auto\">\n      <Toaster position=\"top-center\" reverseOrder={false}></Toaster>\n\n      <div className=\"flex justify-center items-center h-screen\">\n        <div\n          className={`${styles.glass} ${extend.glass}`}\n          style={{ width: \"45%\", paddingTop: \"3em\" }}\n        >\n          <div className=\"title flex flex-col items-center\">\n            <h4 className=\"text-5xl font-bold\">Profile</h4>\n            <span className=\"py-4 text-xl w-2/3 text-center text-gray-500\">\n              You can update the details.\n            </span>\n          </div>\n\n          <form className=\"py-1\" onSubmit={formik.handleSubmit}>\n            <div className=\"profile flex justify-center py-4\">\n              <label htmlFor=\"profile\">\n                <img\n                  src={apiData?.profile || file || avatar}\n                  className={`${styles.profile_img} ${extend.profile_img}`}\n                  alt=\"avatar\"\n                />\n              </label>\n\n              <input\n                onChange={onUpload}\n                type=\"file\"\n                id=\"profile\"\n                name=\"profile\"\n              />\n            </div>\n\n            <div className=\"textbox flex flex-col items-center gap-6\">\n              <div className=\"name flex w-3/4 gap-10\">\n                <input\n                  {...formik.getFieldProps(\"firstName\")}\n                  className={`${styles.textbox} ${extend.textbox}`}\n                  type=\"text\"\n                  placeholder=\"FirstName\"\n                />\n                <input\n                  {...formik.getFieldProps(\"lastName\")}\n                  className={`${styles.textbox} ${extend.textbox}`}\n                  type=\"text\"\n                  placeholder=\"LastName\"\n                />\n              </div>\n\n              <div className=\"name flex w-3/4 gap-10\">\n                <input\n                  {...formik.getFieldProps(\"mobile\")}\n                  className={`${styles.textbox} ${extend.textbox}`}\n                  type=\"text\"\n                  placeholder=\"Mobile No.\"\n                />\n                <input\n                  {...formik.getFieldProps(\"email\")}\n                  className={`${styles.textbox} ${extend.textbox}`}\n                  type=\"text\"\n                  placeholder=\"Email*\"\n                />\n              </div>\n\n              <input\n                {...formik.getFieldProps(\"address\")}\n                className={`${styles.textbox} ${extend.textbox}`}\n                type=\"text\"\n                placeholder=\"Address\"\n              />\n              <button className={styles.btn} type=\"submit\">\n                Update\n              </button>\n            </div>\n          </form>\n          <div className=\"text-center py-4\">\n            <span className=\"text-gray-500\">\n              come back later?{\" \"}\n              <button onClick={userLogout} className=\"text-red-500\" to=\"/\">\n                Logout\n              </button>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}