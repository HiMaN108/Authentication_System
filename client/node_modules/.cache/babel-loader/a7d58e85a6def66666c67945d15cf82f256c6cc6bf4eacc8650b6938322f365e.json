{"ast":null,"code":"import axios from \"axios\";\nimport { jwtDecode } from \"jwt-decode\";\naxios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN || \"https://authentication-system-bxzd.onrender.com\";\n\n/** Make API Requests */\n\n/** To get username from Token */\nexport async function getUsername() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return Promise.reject(\"Cannot find Token\");\n  let decode = jwtDecode(token);\n  return decode;\n}\n\n/** authenticate function */\nexport async function authenticate(username) {\n  try {\n    return await axios.post(\"/api/authenticate\", {\n      username\n    });\n  } catch (error) {\n    return {\n      error: \"Username doesn't exist...!\"\n    };\n  }\n}\n\n/** get User details */\nexport async function getUser({\n  username\n}) {\n  try {\n    const {\n      data\n    } = await axios.get(`/api/user/${username}`);\n    return {\n      data\n    };\n  } catch (error) {\n    return {\n      error: \"Password doesn't Match...!\"\n    };\n  }\n}\n\n/** register user function */\nexport async function registerUser(credentials) {\n  try {\n    const {\n      data: {\n        msg\n      },\n      status\n    } = await axios.post(`/api/register`, credentials);\n    let {\n      username,\n      email\n    } = credentials;\n\n    /** send email */\n    if (status === 201) {\n      await axios.post(\"/api/registerMail\", {\n        username,\n        userEmail: email,\n        text: msg\n      });\n    }\n    return Promise.resolve(msg);\n  } catch (error) {\n    console.error(\"Registration Error:\", error.response ? error.response.data : error.message);\n    return Promise.reject({\n      error: error.response ? error.response.data : \"Registration failed\"\n    });\n  }\n}\n/** login function */\nexport async function verifyPassword({\n  username,\n  password\n}) {\n  try {\n    if (username) {\n      const {\n        data\n      } = await axios.post(\"/api/login\", {\n        username,\n        password\n      });\n      return Promise.resolve({\n        data\n      });\n    }\n  } catch (error) {\n    return Promise.reject({\n      error: \"Password doesn't Match...!\"\n    });\n  }\n}\n\n/** update user profile function */\nexport async function updateUser(response) {\n  try {\n    const token = await localStorage.getItem(\"token\");\n    const data = await axios.put(\"/api/updateuser\", response, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return Promise.resolve({\n      data\n    });\n  } catch (error) {\n    return Promise.reject({\n      error: \"Couldn't Update Profile...!\"\n    });\n  }\n}\n\n/** generate OTP */\nexport async function generateOTP(username) {\n  try {\n    const {\n      data: {\n        code\n      },\n      status\n    } = await axios.get(\"/api/generateOTP\", {\n      params: {\n        username\n      }\n    });\n\n    // send mail with the OTP\n    if (status === 201) {\n      let {\n        data: {\n          email\n        }\n      } = await getUser({\n        username\n      });\n      let text = `Your Password Recovery OTP is ${code}. Verify and recover your password.`;\n      await axios.post(\"/api/registerMail\", {\n        username,\n        userEmail: email,\n        text,\n        subject: \"Password Recovery OTP\"\n      });\n    }\n    return Promise.resolve(code);\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\n\n/** verify OTP */\nexport async function verifyOTP({\n  username,\n  code\n}) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.get(\"/api/verifyOTP\", {\n      params: {\n        username,\n        code\n      }\n    });\n    return {\n      data,\n      status\n    };\n  } catch (error) {\n    return Promise.reject(error);\n  }\n}\n\n/** reset password */\nexport async function resetPassword({\n  username,\n  password\n}) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.put(\"/api/resetPassword\", {\n      username,\n      password\n    });\n    return Promise.resolve({\n      data,\n      status\n    });\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}","map":{"version":3,"names":["axios","jwtDecode","defaults","baseURL","process","env","REACT_APP_SERVER_DOMAIN","getUsername","token","localStorage","getItem","Promise","reject","decode","authenticate","username","post","error","getUser","data","get","registerUser","credentials","msg","status","email","userEmail","text","resolve","console","response","message","verifyPassword","password","updateUser","put","headers","Authorization","generateOTP","code","params","subject","verifyOTP","resetPassword"],"sources":["C:/Users/him20/Downloads/Authentication_System-main/Authentication_System-main/client/src/helper/helper.js"],"sourcesContent":["import axios from \"axios\";\nimport { jwtDecode } from \"jwt-decode\";\n\naxios.defaults.baseURL =\n  process.env.REACT_APP_SERVER_DOMAIN ||\n  \"https://authentication-system-bxzd.onrender.com\";\n\n/** Make API Requests */\n\n/** To get username from Token */\nexport async function getUsername() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return Promise.reject(\"Cannot find Token\");\n  let decode = jwtDecode(token);\n  return decode;\n}\n\n/** authenticate function */\nexport async function authenticate(username) {\n  try {\n    return await axios.post(\"/api/authenticate\", { username });\n  } catch (error) {\n    return { error: \"Username doesn't exist...!\" };\n  }\n}\n\n/** get User details */\nexport async function getUser({ username }) {\n  try {\n    const { data } = await axios.get(`/api/user/${username}`);\n    return { data };\n  } catch (error) {\n    return { error: \"Password doesn't Match...!\" };\n  }\n}\n\n/** register user function */\nexport async function registerUser(credentials) {\n  try {\n    const {\n      data: { msg },\n      status,\n    } = await axios.post(`/api/register`, credentials);\n\n    let { username, email } = credentials;\n\n    /** send email */\n    if (status === 201) {\n      await axios.post(\"/api/registerMail\", {\n        username,\n        userEmail: email,\n        text: msg,\n      });\n    }\n\n    return Promise.resolve(msg);\n  } catch (error) {\n    console.error(\n      \"Registration Error:\",\n      error.response ? error.response.data : error.message\n    );\n    return Promise.reject({\n      error: error.response ? error.response.data : \"Registration failed\",\n    });\n  }\n}\n/** login function */\nexport async function verifyPassword({ username, password }) {\n  try {\n    if (username) {\n      const { data } = await axios.post(\"/api/login\", { username, password });\n      return Promise.resolve({ data });\n    }\n  } catch (error) {\n    return Promise.reject({ error: \"Password doesn't Match...!\" });\n  }\n}\n\n/** update user profile function */\nexport async function updateUser(response) {\n  try {\n    const token = await localStorage.getItem(\"token\");\n    const data = await axios.put(\"/api/updateuser\", response, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n\n    return Promise.resolve({ data });\n  } catch (error) {\n    return Promise.reject({ error: \"Couldn't Update Profile...!\" });\n  }\n}\n\n/** generate OTP */\nexport async function generateOTP(username) {\n  try {\n    const {\n      data: { code },\n      status,\n    } = await axios.get(\"/api/generateOTP\", { params: { username } });\n\n    // send mail with the OTP\n    if (status === 201) {\n      let {\n        data: { email },\n      } = await getUser({ username });\n      let text = `Your Password Recovery OTP is ${code}. Verify and recover your password.`;\n      await axios.post(\"/api/registerMail\", {\n        username,\n        userEmail: email,\n        text,\n        subject: \"Password Recovery OTP\",\n      });\n    }\n    return Promise.resolve(code);\n  } catch (error) {\n    return Promise.reject({ error });\n  }\n}\n\n/** verify OTP */\nexport async function verifyOTP({ username, code }) {\n  try {\n    const { data, status } = await axios.get(\"/api/verifyOTP\", {\n      params: { username, code },\n    });\n    return { data, status };\n  } catch (error) {\n    return Promise.reject(error);\n  }\n}\n\n/** reset password */\nexport async function resetPassword({ username, password }) {\n  try {\n    const { data, status } = await axios.put(\"/api/resetPassword\", {\n      username,\n      password,\n    });\n    return Promise.resolve({ data, status });\n  } catch (error) {\n    return Promise.reject({ error });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}