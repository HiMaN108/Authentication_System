{"ast":null,"code":"import React,{useEffect,useState}from'react';import toast,{Toaster}from'react-hot-toast';import{useAuthStore}from'../store/store.js';import styles from'../styles/Username.module.css';import{generateOTP,verifyOTP}from'../helper/helper';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Recovery(){const{username}=useAuthStore(state=>state.auth);const[OTP,setOTP]=useState();const navigate=useNavigate();useEffect(()=>{generateOTP(username).then(OTP=>{// console.log(OTP)\nif(OTP)return toast.success('OTP has been send to your email!');return toast.error('Problem while generating OTP!');});},[username]);async function onSubmit(e){e.preventDefault();try{let{status}=await verifyOTP({username,code:OTP});if(status===201){toast.success('Verify Successfully!');return navigate('/reset');}}catch(error){return toast.error('Wront OTP! Check email again!');}}// handler of resend OTP\nfunction resendOTP(){let sentPromise=generateOTP(username);toast.promise(sentPromise,{loading:'Sending...',success:/*#__PURE__*/_jsx(\"b\",{children:\"OTP has been send to your email!\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"Could not Send it!\"})});sentPromise.then(OTP=>{// console.log(OTP)\n});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.glass,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-5xl font-bold\",children:\"Recovery\"}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"Enter OTP to recover password.\"})]}),/*#__PURE__*/_jsx(\"form\",{className:\"pt-20\",onSubmit:onSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-sm text-left text-gray-500\",children:\"Enter 6 digit OTP sent to your email address.\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>setOTP(e.target.value),className:styles.textbox,type:\"text\",placeholder:\"OTP\"})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"Recover\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"Can't get OTP? \",/*#__PURE__*/_jsx(\"button\",{onClick:resendOTP,className:\"text-red-500\",children:\"Resend\"})]})})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","toast","Toaster","useAuthStore","styles","generateOTP","verifyOTP","useNavigate","jsx","_jsx","jsxs","_jsxs","Recovery","username","state","auth","OTP","setOTP","navigate","then","success","error","onSubmit","e","preventDefault","status","code","resendOTP","sentPromise","promise","loading","children","className","position","reverseOrder","glass","onChange","target","value","textbox","type","placeholder","btn","onClick"],"sources":["C:/Users/him20/Downloads/Authentication_System-main/Authentication_System-main/client/src/components/Recovery.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport toast, { Toaster } from 'react-hot-toast';\nimport { useAuthStore } from  '../store/store.js'\nimport styles from '../styles/Username.module.css';\nimport { generateOTP, verifyOTP } from '../helper/helper';\nimport { useNavigate } from 'react-router-dom'\n\nexport default function Recovery() {\n\n  const { username } = useAuthStore(state => state.auth);\n  const [OTP, setOTP] = useState();\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    generateOTP(username).then((OTP) => {\n      // console.log(OTP)\n      if(OTP) return toast.success('OTP has been send to your email!');\n      return toast.error('Problem while generating OTP!')\n    })\n  }, [username]);\n\n  async function onSubmit(e){\n    e.preventDefault();\n    try {\n      let { status } = await verifyOTP({ username, code : OTP })\n      if(status === 201){\n        toast.success('Verify Successfully!')\n        return navigate('/reset')\n      }  \n    } catch (error) {\n      return toast.error('Wront OTP! Check email again!')\n    }\n  }\n\n  // handler of resend OTP\n  function resendOTP(){\n\n    let sentPromise = generateOTP(username);\n\n    toast.promise(sentPromise ,\n      {\n        loading: 'Sending...',\n        success: <b>OTP has been send to your email!</b>,\n        error: <b>Could not Send it!</b>,\n      }\n    );\n\n    sentPromise.then((OTP) => {\n      // console.log(OTP)\n    });\n    \n  }\n\n  return (\n    <div className=\"container mx-auto\">\n\n      <Toaster position='top-center' reverseOrder={false}></Toaster>\n\n      <div className='flex justify-center items-center h-screen'>\n        <div className={styles.glass}>\n\n          <div className=\"title flex flex-col items-center\">\n            <h4 className='text-5xl font-bold'>Recovery</h4>\n            <span className='py-4 text-xl w-2/3 text-center text-gray-500'>\n                Enter OTP to recover password.\n            </span>\n          </div>\n\n          <form className='pt-20' onSubmit={onSubmit}>\n\n              <div className=\"textbox flex flex-col items-center gap-6\">\n\n                  <div className=\"input text-center\">\n                    <span className='py-4 text-sm text-left text-gray-500'>\n                      Enter 6 digit OTP sent to your email address.\n                    </span>\n                    <input onChange={(e) => setOTP(e.target.value) } className={styles.textbox} type=\"text\" placeholder='OTP' />\n                  </div>\n\n                  <button className={styles.btn} type='submit'>Recover</button>\n              </div>\n          </form>\n\n          <div className=\"text-center py-4\">\n            <span className='text-gray-500'>Can't get OTP? <button onClick={resendOTP} className='text-red-500'>Resend</button></span>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}